<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Geolocation Permission Demo</title>
</head>
<body>

<h2>Automatic geolocation request on page load</h2>
<p id="status">Requesting permission…</p>

<script>

function requestGeolocation() {
  const statusEl = document.getElementById('status');

  // Make sure the API exists
  if (!('geolocation' in navigator)) {
    statusEl.textContent = 'Geolocation is not supported in this browser.';
    return;
  }


  navigator.geolocation.getCurrentPosition(

    (pos) => {
      const { latitude, longitude } = pos.coords;
      statusEl.innerHTML =
        `✅ Permission granted.<br>Latitude: ${latitude}<br>Longitude: ${longitude}`;
    
    	getLocation(latitude, longitude);
    },

    /* error callback */
	(err) => {
		statusEl.textContent = '❌ You blocked the location request.';

    },
	
    /* options (optional) */
    {
      enableHighAccuracy: true, // faster & lower-power; change to true if you need GPS
      timeout: 5000,            // abort after 5 s if no fix
      maximumAge: 0             // don’t use a cached position
    }
    
  );
    
  
};




//Permission granted. Get Location
function getLocation(lat, lon) {
	let fetchloc = fetch("https://nominatim.openstreetmap.org/reverse?format=json&lat="+lat+"&lon="+lon+"&addressdetails=1");
	let fetchres = fetchloc.json();
	alert(fetchres); 
}



let requestGeo = requestGeolocation();


</script>

</body>
</html>
