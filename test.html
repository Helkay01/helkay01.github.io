<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Geolocation Permission Demo</title>
</head>
<body>

<h2>Automatic geolocation request on page load</h2>
<p id="status">Requesting permission…</p>

<script>





function requestGeolocation() {
  const statusEl = document.getElementById('status');

  // Make sure the API exists
  if (!('geolocation' in navigator)) {
    statusEl.textContent = 'Geolocation is not supported in this browser.';
    return;
  }


  navigator.geolocation.getCurrentPosition(

    (pos) => {
      const { latitude, longitude } = pos.coords;
      statusEl.innerHTML =
        `✅ Permission granted.<br>Latitude: ${latitude}<br>Longitude: ${longitude}`;
    	alert(latitude);
    	getLocation(latitude, longitude);
    },

    /* error callback */
	(err) => {
		statusEl.textContent = '❌ You blocked the location request.';

    },
	
    /* options (optional) */
    {
      enableHighAccuracy: true,
    }
    
  );
    
  
};




//Permission granted. Get Location

async function getLocation(lat, lon) {
	try {
    	let url = 'https://nominatim.openstreetmap.org/reverse?format=json&lat='+lat+'&lon='+lon+'&addressdetails=1';
    	
    	const response = await fetch(url);

    	if(response.ok) {    
    	    const data = await response.json();	
	    	
	    	let village = data.address.village;
	    	let county = data.address.county;
	    	let state = data.address.state;
 		   	let country = data.address.country;
 		   	
 		   	alert(country);
    	}
    	
    	
    	

    	return data;
  } catch (error) {
    	console.error('Error fetching location:', error);
    	return null;
  }
}

		












let requestGeo = requestGeolocation();


</script>

</body>
</html>
